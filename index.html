<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Get Key</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  font-family:system-ui;
  color:white;
}
.card{
  width:280px;
  padding:20px;
  border-radius:16px;
  background:rgba(255,255,255,.08);
  backdrop-filter:blur(10px);
  box-shadow:0 20px 40px rgba(0,0,0,.4);
  text-align:center;
}
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  font-size:16px;
  background:linear-gradient(135deg,#00f2fe,#4facfe);
  color:black;
  font-weight:700;
}
#keyBox{
  margin-top:12px;
  display:none;
  background:black;
  padding:10px;
  border-radius:8px;
  word-break:break-all;
}
small{opacity:.7}
</style>
</head>

<body>
<div class="card">
  <h2>üîë GET KEY</h2>
  <small>Nh·∫•n n√∫t ‚Üí v∆∞·ª£t link ‚Üí nh·∫≠n key</small><br><br>
  <button onclick="handle()">üöÄ L·∫§Y KEY</button>
  <div id="keyBox"></div>
</div>

<script>
/* ================== C·∫§U H√åNH ================== */

// D√ÅN LINK GATE VUOTNHANH ·ªû ƒê√ÇY (KH√îNG PH·∫¢I /api)
const VUOT_LINK = "https://vuotnhanh.com/XXXXX"; 

// Firebase Firestore REST
const PROJECT_ID = "key-tool-bb37b";
const API_KEY = "AIzaSyDR73HZ6MyMF5GRgw3bx_c7vExGuGmzLs4";

/* ============================================== */

function qs(k){
  return new URLSearchParams(location.search).get(k);
}

async function createKey(){
  const key = crypto.randomUUID();

  const url = `https://firestore.googleapis.com/v1/projects/${PROJECT_ID}/databases/(default)/documents/keys?key=${API_KEY}`;

  await fetch(url,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      fields:{
        key:{stringValue:key},
        created:{timestampValue:new Date().toISOString()}
      }
    })
  });

  const box=document.getElementById("keyBox");
  box.style.display="block";
  box.textContent=key;
  navigator.clipboard.writeText(key);
}

async function handle(){
  if(qs("passed")!=="1"){
    location.href = VUOT_LINK;
    return;
  }
  await createKey();
}
</script>
</body>
</html>
