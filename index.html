<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Get Key</title>
  <style>
    body{font-family:system-ui;background:#0b1020;color:#fff;display:flex;min-height:100vh;align-items:center;justify-content:center}
    .card{width:min(620px,92vw);background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:18px;padding:18px}
    .muted{opacity:.75}
    .btn{padding:12px 14px;border-radius:14px;border:0;cursor:pointer;font-weight:800;background:#2b71ff;color:#fff}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .box{margin-top:14px;background:rgba(0,0,0,.25);padding:12px;border-radius:14px}
  </style>
</head>
<body>
  <div class="card">
    <h2>HONGHAC. BUILDA</h2>
    <p class="muted">B·∫•m ‚ÄúL·∫•y key‚Äù ‚Üí t·ª± t·∫°o link V∆∞·ª£tNhanh ‚Üí l√†m nhi·ªám v·ª• ‚Üí quay l·∫°i hi·ªán key.</p>

    <button class="btn" id="get">üîë L·∫•y key</button>

    <div class="box" id="status">S·∫µn s√†ng.</div>
  </div>

<script>
  const WORKER_GO = "https://key-vuotnhanh-api.yeudaushope.workers.dev/go"; // s·ª≠a ƒë√∫ng worker c·ªßa b·∫°n

  const btn = document.getElementById("get");     // id n√∫t l·∫•y key
  const st  = document.getElementById("status");  // id √¥ tr·∫°ng th√°i

  // ‚úÖ Khi V∆∞·ª£tNhanh redirect v·ªÅ /?passed=...
  (function autoRedirectFromPassed(){
    const sp = new URLSearchParams(location.search);
    let passed = sp.get("passed");
    if (!passed) return;

    // V∆∞·ª£tNhanh ƒë√¥i khi th√™m "1" ph√≠a tr∆∞·ªõc URL
    // V√≠ d·ª•: passed=1https://site/verify.html?key=...
    passed = passed.trim();
    passed = passed.replace(/^1+/, ""); // b·ªè c√°c s·ªë 1 ·ªü ƒë·∫ßu

    // N·∫øu b·ªã d√≠nh th√™m k√Ω t·ª± l·∫° tr∆∞·ªõc http, c·∫Øt v·ªÅ ƒë√∫ng ƒëo·∫°n http
    const i = passed.indexOf("http");
    if (i > 0) passed = passed.slice(i);

    if (!passed.startsWith("http")) {
      st && (st.textContent = "L·ªói passed: " + passed);
      return;
    }

    st && (st.textContent = "ƒê√£ v∆∞·ª£t xong, ƒëang chuy·ªÉn h∆∞·ªõng...");
    // Chuy·ªÉn qua verify ƒë·ªÉ hi·ªán key
    location.replace(passed);
  })();

  // N√∫t "L·∫•y key"
  if (btn) {
    btn.onclick = () => {
      btn.disabled = true;
      st && (st.textContent = "ƒêang t·∫°o link v∆∞·ª£t...");
      location.href = WORKER_GO;
    };
  }
</script>
</body>
</html>
