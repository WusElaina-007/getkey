<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Get Key</title>
  <style>
    body{font-family:system-ui;background:#0b1020;color:#fff;display:flex;min-height:100vh;align-items:center;justify-content:center}
    .card{width:min(620px,92vw);background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:18px;padding:18px}
    .muted{opacity:.75}
    .btn{padding:12px 14px;border-radius:14px;border:0;cursor:pointer;font-weight:800;background:#2b71ff;color:#fff}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .box{margin-top:14px;background:rgba(0,0,0,.25);padding:12px;border-radius:14px}
  </style>
</head>
<body>
  <div class="card">
    <h2>PHG GETKEY</h2>
    <p class="muted">Báº¥m â€œLáº¥y keyâ€ â†’ tá»± táº¡o link VÆ°á»£tNhanh â†’ lÃ m nhiá»‡m vá»¥ â†’ quay láº¡i hiá»‡n key.</p>

    <button class="btn" id="get">ğŸ”‘ Láº¥y key</button>

    <div class="box" id="status">Sáºµn sÃ ng.</div>
  </div>

<script>
  const WORKER_GO = "https://key-vuotnhanh-api.yeudaushope.workers.dev/go"; // sá»­a Ä‘Ãºng worker cá»§a báº¡n

  const btn = document.getElementById("get");     // id nÃºt láº¥y key
  const st  = document.getElementById("status");  // id Ã´ tráº¡ng thÃ¡i

  // âœ… Khi VÆ°á»£tNhanh redirect vá» /?passed=...
  (function autoRedirectFromPassed(){
    const sp = new URLSearchParams(location.search);
    let passed = sp.get("passed");
    if (!passed) return;

    // VÆ°á»£tNhanh Ä‘Ã´i khi thÃªm "1" phÃ­a trÆ°á»›c URL
    // VÃ­ dá»¥: passed=1https://site/verify.html?key=...
    passed = passed.trim();
    passed = passed.replace(/^1+/, ""); // bá» cÃ¡c sá»‘ 1 á»Ÿ Ä‘áº§u

    // Náº¿u bá»‹ dÃ­nh thÃªm kÃ½ tá»± láº¡ trÆ°á»›c http, cáº¯t vá» Ä‘Ãºng Ä‘oáº¡n http
    const i = passed.indexOf("http");
    if (i > 0) passed = passed.slice(i);

    if (!passed.startsWith("http")) {
      st && (st.textContent = "Lá»—i passed: " + passed);
      return;
    }

    st && (st.textContent = "ÄÃ£ vÆ°á»£t xong, Ä‘ang chuyá»ƒn hÆ°á»›ng...");
    // Chuyá»ƒn qua verify Ä‘á»ƒ hiá»‡n key
    location.replace(passed);
  })();

  // NÃºt "Láº¥y key"
  if (btn) {
    btn.onclick = () => {
      btn.disabled = true;
      st && (st.textContent = "Äang táº¡o link vÆ°á»£t...");
      location.href = WORKER_GO;
    };
  }
</script>
</body>
</html>
